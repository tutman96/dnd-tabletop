(this["webpackJsonpdnd-tt"]=this["webpackJsonpdnd-tt"]||[]).push([[0],{138:function(e,t,n){e.exports=n(229)},229:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),i=n.n(c),o=n(9),l=n(47),u=n(23),s=n(5),f=n(10),b=n(8),d=n(2),m=n(69),p=n(6),v=n(26),h=n(134),E=n(251),O=n(261),j=n(252),g=n(253),y=n(254),w=n(255),x=n(73),k=n(262),S=n(17),L=n.n(S),A=n(27),N=n(145);function I(e){var t=new N({name:e});return{useAllValues:function(){var e=Object(a.useState)(),n=Object(b.a)(e,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){function e(){t.keys().then(function(){var e=Object(A.a)(L.a.mark((function e(n){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Map,e.next=3,Promise.all(n.map(function(){var e=Object(A.a)(L.a.mark((function e(n){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getItem(n);case 2:r=e.sent,a.set(n,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:c(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}e();var n=t.subscribe(e);return function(){n.unsubscribe()}}),[]),r},useOneValue:function(e){var n=Object(a.useState)(void 0),r=Object(b.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){t.getItem(e).then((function(e){i(e||null)}));var n=t.subscribe(e,(function(e){return i(e)}));return function(){n.unsubscribe()}}),[e]),[c,function(){var n=Object(A.a)(L.a.mark((function n(a){return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(a),n.next=3,t.setItem(e,a);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()]},createItem:function(e,n){t.setItem(e,n)},storage:t}}var C=n(48),D=n(40),T=n(18),z=n(120),U=n.n(z);function P(e){return new Promise((function(t){var n=new Image;n.src=URL.createObjectURL(e),n.onload=function(){t({width:n.width,height:n.height})}}))}function B(e){return new Promise((function(t){var n=document.createElement("video");n.src=URL.createObjectURL(e),n.addEventListener("loadedmetadata",(function(){t({width:n.videoWidth,height:n.videoHeight})}))}))}var F,R=I("asset_file").storage;function M(){var e=document.createElement("input");return e.type="file",e.multiple=!0,e.accept="image/*,video/*",e.click(),new Promise((function(t){e.onchange=function(){var e=Object(A.a)(L.a.mark((function e(n){var a,r,c,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target.files){e.next=3;break}return e.abrupt("return");case 3:r=new Array,c=0;case 5:if(!(c<a.length)){e.next=17;break}if(i=a.item(c)){e.next=9;break}return e.abrupt("continue",14);case 9:return e.t0=r,e.next=12,V(i);case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:c++,e.next=5;break;case 17:t(r);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}function V(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(A.a)(L.a.mark((function e(t){var n,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={id:Object(k.a)(),type:F.IMAGE,transform:{x:0,y:0,width:0,height:0,rotation:0}},0!==t.type.indexOf("image")){e.next=8;break}return e.next=4,P(t);case 4:a=e.sent,n.type=F.IMAGE,e.next=16;break;case 8:if(0!==t.type.indexOf("video")){e.next=15;break}return e.next=11,B(t);case 11:a=e.sent,n.type=F.VIDEO,e.next=16;break;case 15:throw new Error("Unknown file type");case 16:return n.size={width:a.width,height:a.height},n.transform.width=a.width,n.transform.height=a.height,e.next=21,R.setItem(n.id,t);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return W.apply(this,arguments)}function W(){return(W=Object(A.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.removeItem(t.id);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.IMAGE=0]="IMAGE",e[e.VIDEO=1]="VIDEO"}(F||(F={}));var G=new U.a({max:524288e3,length:function(e){return e?e.file.size:0},maxAge:36e5});function X(e){return H.apply(this,arguments)}function H(){return(H=Object(A.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader,a=document.createElement("img");n.onload=function(){n.result&&(a.src=n.result,e(a))},n.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return q.apply(this,arguments)}function q(){return(q=Object(A.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.createElement("video")).src=URL.createObjectURL(t),n.muted=!0,n.autoplay=!0,n.play(),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){function t(t){t.key===e&&c(!0)}var n=function(t){t.key===e&&c(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)}}),[c,e]),r}var K=function(e){var t=e.rectTransform,n=e.onTransform,c=e.isSelected,i=e.onSelected,o=e.children,l=e.rotateEnabled,u=e.scaleEnabled,f=e.skewEnabled,b=e.strokeEnabled,d=Object(s.b)(),m=Object(a.useRef)(),p=Object(a.useRef)();Object(a.useEffect)((function(){var e,t,n;c&&(null===(e=p.current)||void 0===e||e.setNodes([m.current]),null===(t=p.current)||void 0===t||null===(n=t.getLayer())||void 0===n||n.batchDraw())}),[c]);var v=J("Shift");return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.Group,{ref:m,draggable:c,x:t.x,y:t.y,height:t.height,width:t.width,rotation:t.rotation,onMouseDown:function(e){var t,n;1!==e.evt.buttons||v?null===(t=m.current)||void 0===t||t.setDraggable(!1):null===(n=m.current)||void 0===n||n.setDraggable(c)},onMouseUp:function(e){var t;null===(t=m.current)||void 0===t||t.setDraggable(c),0===e.evt.button&&(e.cancelBubble=!0,i())},onClick:function(e){0===e.evt.button&&(e.cancelBubble=!0,i())},onDragEnd:function(e){var t=m.current,a=t.scaleX(),r=t.scaleY(),c=t.rotation();n({x:e.target.x(),y:e.target.y(),rotation:c,width:Math.max(5,t.width()*a),height:Math.max(t.height()*r)})},onTransformEnd:function(e){var t=m.current,a=t.scaleX(),r=t.scaleY(),c=t.rotation();t.scaleX(1),t.scaleY(1),n({x:t.x(),y:t.y(),rotation:c,width:t.width()*a,height:t.height()*r})}},o),c&&r.a.createElement(T.Transformer,{rotateEnabled:l,resizeEnabled:u,enabledAnchors:!1===f?["top-left","top-right","bottom-left","bottom-right"]:void 0,ref:p,borderStrokeWidth:!1===b?0:void 0,anchorFill:d.colors.background.overlay,anchorStroke:d.colors.palette.blue.light,rotationSnaps:[0,45,90,135,180,225,270,315],rotateAnchorOffset:20}))},Q=function(e){var t=e.asset,n=e.onUpdate,c=e.selected,i=e.onSelected,o=function(e){var t=Object(a.useState)(G.get(e.id)),n=Object(b.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){void 0===r&&R.getItem(e.id).then(function(){var t=Object(A.a)(L.a.mark((function t(n){var a,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.type===F.IMAGE?X(n):Z(n);case 2:a=t.sent,r={file:n,element:a},G.set(e.id,r),c(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[r,e.type,e.id]),null===r?null:null===r||void 0===r?void 0:r.element}(t);return r.a.createElement(K,{isSelected:c,onSelected:i,rectTransform:t.transform,onTransform:function(e){n(Object(p.a)(Object(p.a)({},t),{},{transform:e}))}},o&&r.a.createElement(T.Image,{image:o,width:t.transform.width,height:t.transform.height}))},$=n(60),ee=n.n($),te=n(237),ne=n(238),ae=n(239),re=n(133),ce=n(121),ie=function(e){var t=e.label,n=e.keyboardShortcuts,c=Object(re.a)(e,["label","keyboardShortcuts"]);return Object(a.useEffect)((function(){if(n&&c.onClick){var e=function(e){var t;n.includes(e.key)&&"INPUT"!==(null===(t=window.document.activeElement)||void 0===t?void 0:t.tagName)&&c.onClick(e)};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}}),[n,c.onClick]),r.a.createElement(ce.a,{content:t,placement:"bottom"},r.a.createElement(h.b,Object.assign({variant:"ghost",label:t},c)))},oe=n(77);function le(){var e=Object(o.a)(["\n\t\t\t\tposition: relative;\n\t\t\t\ttop: 0; left: 0; right: 0;\n\t\t\t\tmin-height: 40px;\n\t\t\t\tbackground-color: ",";\n\t\t\t\tbox-shadow: ",";\n\t\t\t\tz-index: 100;\n\t\t\t\t> span {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t}\n\t\t\t"]);return le=function(){return e},e}var ue=function(e){var t=e.children,n=Object(s.b)();return r.a.createElement("div",{className:Object(f.a)(le(),n.colors.background.tint1,n.shadows.md)},t)},se=Object(oe.a)([void 0,function(){}],(function(){return Object(a.useState)(void 0)})),fe=function(e){var t=e.children,n=se(),c=Object(b.a)(n,1)[0];return Object(a.useEffect)((function(){return c?(i.a.render(r.a.createElement(s.a,null,t),c),function(){return i.a.unmountComponentAtNode(c)}):function(){}}),[t,c]),null},be=function(e){var t=e.children,n=Object(a.useRef)(),c=se(),i=Object(b.a)(c,2)[1];return Object(a.useEffect)((function(){i(n.current)}),[n,i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,null,r.a.createElement("span",{ref:n})),t)},de=n(236),me=n(260),pe=n(39),ve=n(233),he=n(234);function Ee(){var e=Object(o.a)(["\n            display: flex; \n            align-items: center;\n          "]);return Ee=function(){return e},e}function Oe(){var e=Object(o.a)(["\n            display: flex; \n            align-items: center;\n          "]);return Oe=function(){return e},e}function je(){var e=Object(o.a)(["margin: 0 ",";"]);return je=function(){return e},e}var ge=function(e){var t=e.calibration,n=e.onUpdate,c=Object(s.b)(),i=Object(f.a)(je(),c.spaces.sm);function o(e,a){var r=Number(a.target.value);if(!isNaN(r)){var c,i=Object(p.a)({},t),o=Object(D.a)(e);try{for(o.s();!(c=o.n()).done;){i[c.value]=r}}catch(l){o.e(l)}finally{o.f()}n(i)}}var l=Object(a.useState)(t.ppiX===t.ppiY),u=Object(b.a)(l,2),d=u[0],m=u[1];return Object(a.useEffect)((function(){d&&t.ppiX!==t.ppiY&&m(!1)}),[t,n,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(O.c,{label:"Pixels per Inch"},r.a.createElement("div",{className:Object(f.a)(Oe())},r.a.createElement(O.b,{type:"number",min:1,placeholder:"Horizontal PPI",value:t.ppiX,onChange:function(e){return o(d?["ppiX","ppiY"]:["ppiX"],e)}}),r.a.createElement("div",{className:i},r.a.createElement(h.b,{variant:"ghost",label:d?"Unlock PPI":"Lock PPI",icon:d?r.a.createElement(ve.a,null):r.a.createElement(he.a,null),onClick:function(){t.ppiX!==t.ppiY&&n(Object(p.a)(Object(p.a)({},t),{},{ppiY:t.ppiX})),m(!d)}})),r.a.createElement(O.b,{type:"number",min:1,placeholder:"Vertical PPI",value:d?t.ppiX:t.ppiY,disabled:d,onChange:function(e){return o(["ppiY"],e)}}))),r.a.createElement(O.c,{label:"Offset"},r.a.createElement("div",{className:Object(f.a)(Ee())},r.a.createElement(O.b,{type:"number",placeholder:"Horizontal Offset",value:t.xOffset,onChange:function(e){return o(["xOffset"],e)}}),r.a.createElement("div",{className:i},"x"),r.a.createElement(O.b,{type:"number",placeholder:"Vertical Offset",value:t.yOffset,onChange:function(e){return o(["yOffset"],e)}}))))},ye=n(126),we=n.n(ye);function xe(){var e=Object(o.a)(["\t\t\t\t\n\t\t\t\tbackground-color: ",";\n\t\t\t\tbackground-image: linear-gradient(45deg, "," 25%, transparent 25%, transparent 75%, "," 75%, ","),\n\t\t\t\tlinear-gradient(45deg, "," 25%, transparent 25%, transparent 75%, "," 75%, ",");\n\t\t\t\tbackground-size: 20px 20px;\n\t\t\t\tbackground-position: 0 0, 10px 10px;\n\t\t\t"]);return xe=function(){return e},e}ee.a.dragButtons=[0,1,2];var ke=function(e){var t=e.draggable,n=e.initialZoom,c=void 0===n?1:n,i=e.className,o=e.children,l=Object(s.b)(),u=Object(a.useRef)(null),d=we()(u),m=Object(a.useRef)(),p=Object(a.useState)(c),v=Object(b.a)(p,2),h=v[0],E=v[1],O=J("Shift");return r.a.createElement("div",{ref:u,className:Object(f.a)(xe(),l.colors.background.tint2,l.colors.background.tint1,l.colors.background.tint1,l.colors.background.tint1,l.colors.background.tint1,l.colors.background.tint1,l.colors.background.tint1)+(i?" ".concat(i):"")},r.a.createElement(T.Stage,{ref:m,width:d.width,height:d.height,draggable:void 0===t||t,onMouseDown:function(e){var n,a;1!==e.evt.buttons||O?null===(n=m.current)||void 0===n||n.setDraggable(void 0===t||t):null===(a=m.current)||void 0===a||a.setDraggable(!1)},onMouseUp:function(){var e;null===(e=m.current)||void 0===e||e.setDraggable(void 0===t||t)},scale:{x:h,y:h},onWheel:function(e){e.evt.preventDefault();var t=h,n=m.current,a=n.getPointerPosition();if(a){var r=(a.x-n.x())/t,c=(a.y-n.y())/t,i=e.evt.deltaY;if(0!==i){var o=1+.004*Math.abs(i),l=e.evt.deltaY>0?t/o:t*o;E(l);var u={x:a.x-r*l,y:a.y-c*l};n.position(u),n.batchDraw()}}},onContextMenu:function(e){return e.evt.preventDefault(),!1}},o))},Se=Object(oe.a)([!0,function(){}],(function(){return Object(a.useState)(!0)}));function Le(){var e=Object(s.b)(),t=Se(),n=Object(b.a)(t,1)[0];return Object(p.a)(Object(p.a)({},e),{},{headerHeight:56,sceneListWidth:n?240:0,sidebarWidth:48,visualAssetSizerSize:650})}var Ae,Ne=n(235);function Ie(){var e=Object(o.a)(["padding: ",";"]);return Ie=function(){return e},e}function Ce(){var e=Object(o.a)(["\n            display: flex; \n            align-items: center;\n          "]);return Ce=function(){return e},e}function De(){var e=Object(o.a)(["\n            display: flex; \n            align-items: center;\n          "]);return De=function(){return e},e}function Te(){var e=Object(o.a)(["margin: 0 ",";"]);return Te=function(){return e},e}!function(e){e.DISPLAYED_SCENE="displayed_scene",e.TABLE_FREEZE="table_freeze",e.TABLE_RESOLUTION="table_resolution",e.TABLE_SIZE="table_size"}(Ae||(Ae={}));var ze=I("settings");function Ue(){return ze}var Pe=Ue().useOneValue;function Be(){var e=Pe(Ae.TABLE_RESOLUTION),t=Object(b.a)(e,2),n=t[0],a=t[1];return null===n?[{width:1920,height:1080},a]:[n,a]}function Fe(){var e=Pe(Ae.TABLE_SIZE),t=Object(b.a)(e,2),n=t[0],a=t[1];return null===n?[45,a]:[n,a]}function Re(){var e=Be(),t=Object(b.a)(e,1)[0],n=Fe(),a=Object(b.a)(n,1)[0];if(!t||!a)return null;var r=Math.atan(t.height/t.width),c=a*Math.cos(r);return t.width/c}var Me=function(){var e=Object(s.b)(),t=Be(),n=Object(b.a)(t,2),a=n[0],c=n[1],i=Fe(),o=Object(b.a)(i,2),l=o[0],u=o[1],d=Object(f.a)(Te(),e.spaces.sm);return void 0===a||void 0===l?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"h6"},"Table Display Settings"),r.a.createElement(O.c,{label:"Resolution"},r.a.createElement("div",{className:Object(f.a)(De())},r.a.createElement(O.b,{type:"number",min:1,placeholder:"width",value:a.width,onChange:function(e){var t=Number(e.target.value);isNaN(t)||c(Object(p.a)(Object(p.a)({},a),{},{width:t}))}}),r.a.createElement("div",{className:d},"x"),r.a.createElement(O.b,{type:"number",min:1,placeholder:"height",value:a.height,onChange:function(e){var t=Number(e.target.value);isNaN(t)||c(Object(p.a)(Object(p.a)({},a),{},{height:t}))}}))),r.a.createElement(O.c,{label:"Screen Size"},r.a.createElement("div",{className:Object(f.a)(Ce())},r.a.createElement(O.b,{type:"number",min:1,value:l,onChange:function(e){var t=Number(e.target.value);isNaN(t)||u(t)}}),r.a.createElement("div",{className:d},"inches"))))},Ve=function(){var e=Object(s.b)(),t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],i=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{content:"Settings",placement:"right"},r.a.createElement(h.b,{variant:"ghost",color:e.colors.text.muted,size:"lg",icon:r.a.createElement(Ne.a,null),label:"Settings",onClick:function(){return i(!0)}})),r.a.createElement(me.a,{isOpen:c,onRequestClose:function(){return i(!1)},title:"Settings"},r.a.createElement("div",{className:Object(f.a)(Ie(),e.spaces.lg)},r.a.createElement(Me,null))))};function Ye(){var e=Object(o.a)(["\n        width: ","px;\n\t\t\t\theight: ","px;\n        margin-left: -",";\n      "]);return Ye=function(){return e},e}var _e=function(e){var t=e.asset,n=e.onUpdate,a=Le(),c=Re();if(console.log({tablePPI:c}),!c||!t.calibration)return null;for(var i=Array(),o=1;o<3;o+=2)i.push({width:3*t.calibration.ppiX,height:1*t.calibration.ppiY,x:0,y:t.calibration.ppiY*o}),i.push({width:1*t.calibration.ppiX,height:3*t.calibration.ppiY,x:t.calibration.ppiX*o,y:0});return r.a.createElement(ke,{className:Object(f.a)(Ye(),a.visualAssetSizerSize,a.visualAssetSizerSize,a.spaces.lg),initialZoom:a.visualAssetSizerSize/t.size.width},r.a.createElement(T.Layer,null,r.a.createElement(Q,{asset:Object(p.a)(Object(p.a)({},t),{},{transform:Object(p.a)(Object(p.a)({},t.size),{},{rotation:0,x:0,y:0})}),onSelected:function(){},selected:!1,onUpdate:function(){}})),r.a.createElement(T.Layer,null,r.a.createElement(K,{rectTransform:{width:3*t.calibration.ppiX,height:3*t.calibration.ppiY,x:t.calibration.xOffset,y:t.calibration.yOffset,rotation:0},rotateEnabled:!1,strokeEnabled:!1,isSelected:!0,onSelected:function(){},onTransform:function(e){n({ppiX:Math.round(e.width/3*100)/100,ppiY:Math.round(e.height/3*100)/100,xOffset:Math.round(100*e.x)/100,yOffset:Math.round(100*e.y)/100})}},r.a.createElement(T.Rect,{x:0,y:0,width:3*t.calibration.ppiX,height:3*t.calibration.ppiY,strokeWidth:1,stroke:a.colors.palette.blue.base,strokeScaleEnabled:!1}),i.map((function(e,t){return r.a.createElement(T.Rect,Object.assign({key:t},e,{strokeWidth:1,stroke:a.colors.palette.blue.base,strokeScaleEnabled:!1}))})))))};function We(){var e=Object(o.a)(["\n                display: flex;\n                margin-top: ",";\n                justify-content: flex-end;\n              "]);return We=function(){return e},e}function Ge(){var e=Object(o.a)(["padding: ",";"]);return Ge=function(){return e},e}var Xe=function(e){var t=e.asset,n=e.onUpdate,c=Object(s.b)(),i=Object(a.useState)(!1),o=Object(b.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(),m=Object(b.a)(d,2),v=m[0],h=m[1];return Object(a.useEffect)((function(){t&&h(t.calibration||{ppiX:150,ppiY:150,xOffset:0,yOffset:0})}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{label:"Calibrate Size",icon:r.a.createElement(de.a,null),onClick:function(){return u(!0)},disabled:!t}),v&&t&&r.a.createElement(me.a,{isOpen:l,onRequestClose:function(){return u(!1)},title:"Asset Calibration"},r.a.createElement("div",{className:Object(f.a)(Ge(),c.spaces.lg)},r.a.createElement(_e,{asset:Object(p.a)(Object(p.a)({},t),{},{calibration:v}),onUpdate:h}),r.a.createElement(ge,{calibration:v,onUpdate:h}),r.a.createElement("div",{className:Object(f.a)(We(),c.spaces.lg)},r.a.createElement(pe.a,{variant:"ghost",intent:"primary",onClick:function(){return n(Object(p.a)(Object(p.a)({},t),{},{calibration:v}))}},"Save")))))};function He(){var e=Object(o.a)(["flex-grow: 2;"]);return He=function(){return e},e}var Ze,qe=function(e){var t=e.layer,n=e.onUpdate,c=e.active,i=Object(a.useState)(null),o=Object(b.a)(i,2),l=o[0],u=o[1],s=Object(a.useRef)(),d=Re(),m=Object(a.useCallback)(Object(A.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||!t.assets.has(l)){e.next=7;break}return a=t.assets.get(l),t.assets.delete(l),e.next=5,_(a);case 5:n(Object(p.a)({},t)),u(null);case 7:case"end":return e.stop()}}),e)}))),[l,t,n,u]);Object(a.useEffect)((function(){if(s.current&&Array.from(t.assets.values()).some((function(e){return e.type===F.VIDEO}))){var e=new ee.a.Animation((function(){}),s.current);return e.start(),function(){e.stop()}}}),[s,t]),Object(a.useEffect)((function(){var e;if(null===(e=s.current)||void 0===e?void 0:e.parent){var t=s.current.parent;return t.on("click.konva",n),function(){t.off("click.konva",n)}}function n(){u(null)}}),[s,u]),Object(a.useEffect)((function(){c||null===l||u(null)}),[c,l]);var v=Object(a.useMemo)((function(){var e=Array.from(t.assets.values()).find((function(e){return e.id===l}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{icon:r.a.createElement(te.a,null),label:"Add Asset",onClick:Object(A.a)(L.a.mark((function e(){var a,r,c,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:a=e.sent,r=Object(D.a)(a);try{for(r.s();!(c=r.n()).done;)i=c.value,t.assets.set(i.id,i)}catch(o){r.e(o)}finally{r.f()}n(Object(p.a)({},t));case 6:case"end":return e.stop()}}),e)})))}),r.a.createElement(Xe,{asset:e,onUpdate:function(e){t.assets.set(e.id,e),n(Object(p.a)({},t))}}),r.a.createElement(ie,{icon:r.a.createElement(ne.a,null),label:"Reset Asset Size",disabled:!e||!e.calibration||!d,onClick:function(){var a,r;e.transform=(r=d,(a=e).calibration?(console.log(a),Object(p.a)(Object(p.a)({},a.transform),{},{width:a.size.width/a.calibration.ppiX*r,height:a.size.height/a.calibration.ppiY*r})):a.transform),console.log(e.transform),t.assets.set(e.id,e),n(Object(p.a)({},t))}}),r.a.createElement("div",{className:Object(f.a)(He())}),r.a.createElement(ie,{icon:r.a.createElement(ae.a,null),label:"Delete Asset",disabled:null===l,onClick:m,keyboardShortcuts:["Delete","Backspace"]}))}),[t,d,l,n,m]);return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement(fe,null,v),r.a.createElement(T.Layer,{ref:s},Array.from(t.assets.values()).map((function(e){return r.a.createElement(Q,{key:e.id,asset:e,selected:c&&l===e.id,onSelected:function(){return c&&u(e.id)},onUpdate:function(e){t.assets.set(e.id,e),n(Object(p.a)({},t))}})}))))};!function(e){e[e.ASSETS=0]="ASSETS",e[e.FOG=1]="FOG",e[e.TABLE_VIEW=2]="TABLE_VIEW"}(Ze||(Ze={}));var Je=Object(C.a)({},Ze.ASSETS,qe);function Ke(e){var t={id:Object(k.a)(),name:"Untitled",type:e,visible:!0};return e===Ze.ASSETS&&(t.assets=new Map),t}function Qe(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(A.a)(L.a.mark((function e(t,n){var a,r,c,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(a=t.layers.indexOf(n))){e.next=3;break}return e.abrupt("return",t);case 3:if(n.type!==Ze.ASSETS){e.next=12;break}r=0,c=Array.from(n.assets.values());case 5:if(!(r<c.length)){e.next=12;break}return i=c[r],e.next=9,_(i);case 9:r++,e.next=5;break;case 12:return t.layers.splice(a,1),e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=I("scene");function tt(){return et}var nt=n(31),at=n(128),rt=n(240),ct=n(241),it=n(242),ot=n(243),lt=n(244),ut=n(245),st=n(246),ft=n(129),bt=n(247),dt=n(248),mt=n(249);function pt(){var e=Object(o.a)(["\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t"]);return pt=function(){return e},e}function vt(){var e=Object(o.a)(["\n\t\t\t\t\t\t\t\tbackground-color: "," !important;\n\t\t\t\t\t\t\t"]);return vt=function(){return e},e}function ht(){var e=Object(o.a)(["\n\t\t\t\t\t\t\t\tbackground-color: "," !important;\n\t\t\t\t\t\t\t"]);return ht=function(){return e},e}function Et(){var e=Object(o.a)(["\n\t\t\t\t\t\tmax-height: 350px;\n\t\t\t\t\t\toverflow: auto;\n\t\t\t\t\t"]);return Et=function(){return e},e}function Ot(){var e=Object(o.a)(["\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\twidth: 300px;\n\t\t\t\t"]);return Ot=function(){return e},e}function jt(){var e=Object(o.a)(["\n\t\t\t\tposition: absolute;\n\t\t\t\tright: ",";\n\t\t\t\tbottom: ",";\n\t\t\t"]);return jt=function(){return e},e}var gt=function(e){var t=e.scene,n=e.activeLayer,a=e.setActiveLayer,c=e.updateLayer,i=e.addLayer,o=e.moveActiveLayer,l=e.deleteActiveLayer,u=t.layers.findIndex((function(e){return e.id===n})),b=u===t.layers.length-1,d=0===u,m=Object(s.b)();return r.a.createElement("div",{className:Object(f.a)(jt(),m.spaces.md,m.spaces.md)},r.a.createElement(at.a,{className:Object(f.a)(Ot())},r.a.createElement(rt.a,{className:Object(f.a)(Et())},r.a.createElement(rt.b,{className:Object(f.a)(ht(),"TABLE_VIEW"===n?m.colors.intent.primary.base:"initial"),contentBefore:r.a.createElement(h.b,{variant:"ghost",label:"Table View",icon:r.a.createElement(ct.a,null),disabled:!0}),primary:"Table View",contentAfter:" ",onClick:function(){return a("TABLE_VIEW")}}),Array.from(t.layers).reverse().map((function(e){return r.a.createElement(rt.b,{key:e.id,className:Object(f.a)(vt(),n===e.id?m.colors.intent.primary.base:"initial"),contentBefore:r.a.createElement(h.b,{variant:"ghost",label:e.visible?"Hide Layer":"Show Layer",onClick:function(t){c(Object(p.a)(Object(p.a)({},e),{},{visible:!e.visible})),t.preventDefault()},icon:e.visible?r.a.createElement(it.a,null):r.a.createElement(ot.a,null)}),primary:e.name,contentAfter:r.a.createElement(v.a,{variant:"subtitle"},Ze[e.type]),onClick:function(){return a(e.id)}})}))),r.a.createElement("div",{className:Object(f.a)(pt(),m.colors.background.tint1)},r.a.createElement(h.b,{variant:"ghost",disabled:null===n,color:m.colors.intent.danger.base,icon:r.a.createElement(ae.a,null),label:"Delete Layer",onClick:l}),r.a.createElement("div",null,r.a.createElement(h.b,{variant:"ghost",disabled:null===n||b,icon:r.a.createElement(lt.a,null),label:"Layer Up",onClick:function(){return o("up")}}),r.a.createElement(h.b,{variant:"ghost",disabled:null===n||d,icon:r.a.createElement(ut.a,null),label:"Layer Down",onClick:function(){return o("down")}})),r.a.createElement(st.a,{placement:"top-end",content:r.a.createElement(ft.c,null,r.a.createElement(ft.a,{contentBefore:r.a.createElement(bt.a,null),onPress:function(){return i(Ze.ASSETS)}},"Asset Layer"),r.a.createElement(ft.a,{contentBefore:r.a.createElement(dt.a,null),onPress:function(){return i(Ze.FOG)},disabled:!0},"Fog Layer"))},r.a.createElement(h.b,{variant:"ghost",icon:r.a.createElement(mt.a,null),label:"Add Layer"})))))},yt=n(250),wt={id:"TABLE_VIEW",name:"Table View",type:Ze.TABLE_VIEW,visible:!0},xt=function(e){var t=e.layer,n=e.active,c=e.showBorder,i=e.showGrid,o=e.onUpdate,l=Object(s.b)(),u=Be(),f=Object(b.a)(u,1)[0],d=Re(),m=Object(a.useState)(t.options),v=Object(b.a)(m,2),h=v[0],E=v[1];Object(a.useEffect)((function(){E(t.options)}),[t.options,E]);var j=Object(a.useRef)(),g=Object(a.useMemo)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{icon:r.a.createElement(yt.a,null),label:"Reset View",onClick:function(){o(Object(p.a)(Object(p.a)({},t),{},{options:Object(p.a)(Object(p.a)({},h),{},{offset:{x:0,y:0},rotation:0,scale:1})}))}}),r.a.createElement(O.a,{label:"Display Grid",checked:h.displayGrid,onChange:function(e){o(Object(p.a)(Object(p.a)({},t),{},{options:Object(p.a)(Object(p.a)({},h),{},{displayGrid:e.target.checked})}))}}))}),[t,h,o]),y=J("Shift");if(!f||null===d)return null;var w=f.width,x=f.height,k=new Array;if(i){for(var S=Math.floor(h.offset.x/d)*d;S<=h.offset.x+f.width;S+=d)k.push({start:{x:S,y:h.offset.y},end:{x:S,y:h.offset.y+f.height}});for(var L=Math.floor(h.offset.y/d)*d;L<=h.offset.y+f.height;L+=d)k.push({start:{x:h.offset.x,y:L},end:{x:h.offset.x+f.width,y:L}})}return r.a.createElement(T.Layer,null,n&&r.a.createElement(fe,null,g),r.a.createElement(T.Group,{clipFunc:function(e){e.beginPath(),e.rect(h.offset.x,h.offset.y,w,x),e.rotate(h.rotation),e.closePath()},listening:n},k.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(T.Line,{key:"l".concat(t),points:[e.start.x,e.start.y,e.end.x,e.end.y],stroke:l.colors.palette.gray.light,dash:[1,1],strokeWidth:1,strokeScaleEnabled:!1}),r.a.createElement(T.Line,{key:"d".concat(t),points:[e.start.x,e.start.y,e.end.x,e.end.y],stroke:l.colors.palette.gray.dark,dash:[1,1],dashOffset:1,strokeWidth:1,strokeScaleEnabled:!1}))}))),c||n?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.Group,{ref:j,draggable:n,x:h.offset.x,y:h.offset.y,width:w,height:x,rotation:h.rotation,onMouseDown:function(e){var t,a;1!==e.evt.buttons||y?null===(t=j.current)||void 0===t||t.setDraggable(!1):null===(a=j.current)||void 0===a||a.setDraggable(n)},onMouseUp:function(){var e;null===(e=j.current)||void 0===e||e.setDraggable(n)},onDragMove:function(e){var t=j.current.rotation();E({offset:{x:e.target.x(),y:e.target.y()},rotation:t,displayGrid:h.displayGrid,scale:h.scale})},onDragEnd:function(){o(Object(p.a)(Object(p.a)({},t),{},{options:h}))}},r.a.createElement(T.Rect,{width:w,height:x,stroke:n?l.colors.palette.blue.base:l.colors.palette.gray.light,dash:[10,10],strokeWidth:5,listening:n}))):null)};function kt(){var e=Object(o.a)(["\n\t\t\t\t\tflex-grow: 2;\n\t\t\t\t\twidth: calc(100vw - ","px);\n\t\t\t\t\theight: calc(100vh - ","px);\n\t\t\t\t"]);return kt=function(){return e},e}var St=function(e){var t=e.scene,n=e.onUpdate,c=Le(),i=Object(a.useState)(null),o=Object(b.a)(i,2),l=o[0],u=o[1];Object(a.useEffect)((function(){l!==wt.id&&(null!==l&&t.layers.some((function(e){return e.id===l}))||!t.layers.length||u(t.layers[0].id))}),[l,t]);var s=Object(a.useCallback)((function(e){var a=t.layers.findIndex((function(t){return t.id===e.id}));t.layers[a]=e,n(Object(p.a)({},t))}),[t,n]);function d(){return(d=Object(A.a)(L.a.mark((function e(){var a,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.layers.find((function(e){return e.id===l})))){e.next=7;break}return e.next=4,Qe(t,a);case 4:r=e.sent,n(Object(p.a)(Object(p.a)({},r),{},{layers:Object(nt.a)(r.layers)})),u(null);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(be,null,r.a.createElement(ke,{className:Object(f.a)(kt(),c.sceneListWidth+c.sidebarWidth,c.headerHeight)},t.layers.map((function(e){var t=Je[e.type];return t&&!1!==e.visible?r.a.createElement(t,{key:e.id,layer:e,onUpdate:s,active:l===e.id}):null})),r.a.createElement(xt,{layer:Object(p.a)(Object(p.a)({},wt),{},{options:t.table}),active:l===wt.id,onUpdate:function(e){n(Object(p.a)(Object(p.a)({},t),{},{table:e.options}))},showBorder:!0,showGrid:!0})),r.a.createElement(gt,{scene:t,activeLayer:l,setActiveLayer:u,updateLayer:function(e){var a=t.layers.findIndex((function(t){return t.id===e.id}));t.layers[a]=e,n(Object(p.a)(Object(p.a)({},t),{},{layers:Object(nt.a)(t.layers)}))},addLayer:function(e){var a=Ke(e);a.name="Layer "+(t.layers.length+1),t.layers.push(a),n(Object(p.a)({},t))},editActiveLayerName:function(e){var a=t.layers.find((function(e){return e.id===l}));a&&(a.name=e,n(Object(p.a)(Object(p.a)({},t),{},{layers:Object(nt.a)(t.layers)})))},moveActiveLayer:function(e){var a=t.layers.findIndex((function(e){return e.id===l}));if(-1!==a){var r="up"===e?a+1:a-1;if(r>t.layers.length-1||r<0)return;var c=t.layers[a],i=t.layers[r];t.layers[r]=c,t.layers[a]=i,n(Object(p.a)(Object(p.a)({},t),{},{layers:Object(nt.a)(t.layers)}))}},deleteActiveLayer:function(){return d.apply(this,arguments)}}))};function Lt(){var e=Object(o.a)(["\n\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\tpadding: "," ",";\n\t\t\t\t\tbox-shadow: ",";\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\theight: ","px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t"]);return Lt=function(){return e},e}function At(){var e=Object(o.a)(["\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\t\t\t\tflex-grow: 1;\n\t\t\t"]);return At=function(){return e},e}function Nt(){var e=Object(o.a)(["\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tz-index: 200;\n\t\t\t"]);return Nt=function(){return e},e}var It=tt().useOneValue,Ct=Ue().useOneValue;function Dt(e){var t=e.name,n=e.onUpdate,c=Object(s.b)(),i=Object(a.useState)(!1),o=Object(b.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(t),m=Object(b.a)(d,2),p=m[0],g=m[1];return Object(a.useEffect)((function(){g(t)}),[t]),r.a.createElement("div",{className:Object(f.a)(Nt())},!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"lead"},t),r.a.createElement(h.b,{icon:r.a.createElement(E.a,null),size:"sm",variant:"ghost",label:"Edit Name",onClick:function(){return u(!0)}})),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.b,{value:p,onChange:function(e){return g(e.target.value)}}),r.a.createElement(h.b,{icon:r.a.createElement(j.a,null),size:"sm",variant:"ghost",color:c.colors.intent.success.base,label:"Save Name",onClick:function(){n(p),u(!1)},disabled:!p.trim()})))}function Tt(e){var t=e.scene,n=Object(s.b)(),a=Ct(Ae.DISPLAYED_SCENE),c=Object(b.a)(a,2),i=c[0],o=c[1],l=Ct(Ae.TABLE_FREEZE),u=Object(b.a)(l,2),f=u[0],d=u[1];return i===t.id?f?r.a.createElement(h.b,{icon:r.a.createElement(g.a,null),variant:"ghost",label:"Unfreeze Table",color:n.colors.palette.green.base,onPress:function(){return d(!1)}}):r.a.createElement(h.b,{icon:r.a.createElement(y.a,null),variant:"ghost",label:"Freeze Table",color:n.colors.palette.yellow.base,onPress:function(){return d(!0)}}):r.a.createElement(h.b,{icon:r.a.createElement(w.a,null),variant:"ghost",label:"Display on Table",color:n.colors.text.heading,onPress:function(){o(t.id),d(!1)}})}var zt=function(){var e=Le(),t=Object(u.i)(),n=It(t.params.id),a=Object(b.a)(n,2),c=a[0],i=a[1];return t.params.id?void 0===c?r.a.createElement(x.a,{label:"Loading scene...",center:!0}):null===c?null:r.a.createElement("div",{className:Object(f.a)(At())},r.a.createElement("div",{className:Object(f.a)(Lt(),e.colors.background.layer,e.spaces.sm,e.spaces.md,e.shadows.sm,e.headerHeight)},r.a.createElement(Dt,{name:c.name,onUpdate:function(e){return i(Object(p.a)(Object(p.a)({},c),{},{name:e}))}}),r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement(Tt,{scene:c}))),r.a.createElement(St,{scene:c,onUpdate:i})):null},Ut=n(256),Pt=n(257),Bt=n(258);function Ft(){var e=Object(o.a)(["\n              background: "," !important;\n            "]);return Ft=function(){return e},e}function Rt(){var e=Object(o.a)(["\n          overflow: auto;\n        "]);return Rt=function(){return e},e}function Mt(){var e=Object(o.a)(["\n          display: flex;\n          padding: ",";\n        "]);return Mt=function(){return e},e}function Vt(){var e=Object(o.a)(["\n        display: ",";\n        width: ","px;\n        flex-shrink: 0;\n        flex-direction: column;\n        z-index: 300;\n      "]);return Vt=function(){return e},e}function Yt(){var e=Object(o.a)(["\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      "]);return Yt=function(){return e},e}function _t(){var e=Object(o.a)(["\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        width: 100%;\n      "]);return _t=function(){return e},e}var Wt=tt(),Gt=Wt.useAllValues,Xt=Wt.createItem,Ht=Ue().useOneValue;function Zt(){return r.a.createElement(rt.a,null,r.a.createElement(rt.b,{primary:r.a.createElement(Ut.a,{animated:!0})}))}function qt(e){var t=Object(s.b)();return r.a.createElement("div",{className:Object(f.a)(_t())},r.a.createElement("div",{className:Object(f.a)(Yt())},r.a.createElement(Pt.a,{size:"xl",color:"#BDBEBF"}),r.a.createElement(pe.a,{iconBefore:r.a.createElement(mt.a,null),variant:"ghost",color:t.colors.text.muted,onClick:e.onAdd},"Add a scene")))}function Jt(e){var t=e.scene,n=Object(s.b)(),a=Ht(Ae.DISPLAYED_SCENE),c=Object(b.a)(a,1)[0],i=Ht(Ae.TABLE_FREEZE),o=Object(b.a)(i,1)[0];return c===t.id?o?r.a.createElement(y.a,{color:n.colors.palette.yellow.base}):r.a.createElement(g.a,{color:n.colors.palette.green.base}):null}var Kt=function(e){var t=e.onSceneSelect,n=e.selectedSceneId,c=Le(),i=Gt(),o=Object(a.useState)(""),l=Object(b.a)(o,2),u=l[0],s=l[1];function d(){var e=function(){var e=Ke(Ze.ASSETS);return e.name="Layer 1",{id:Object(k.a)(),name:"Untitled",table:{offset:{x:0,y:0},rotation:0,scale:1,displayGrid:!0},layers:[e]}}();Xt(e.id,e),t(e)}if(!i)return r.a.createElement(Zt,null);if(0===i.size)return r.a.createElement(qt,{onAdd:d});var m=Array.from(i.values());return u&&(m=m.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())}))),r.a.createElement(rt.a,{className:Object(f.a)(Vt(),c.sceneListWidth>0?"flex":"none",c.sceneListWidth)},r.a.createElement("div",{className:Object(f.a)(Mt(),c.spaces.sm)},r.a.createElement(O.b,{type:"search",placeholder:"Find a scene...",onChange:function(e){return s(e.target.value)},value:u}),r.a.createElement(h.b,{icon:r.a.createElement(Bt.a,null),label:"Add Scene",variant:"ghost",onClick:d})),r.a.createElement("div",{className:Object(f.a)(Rt())},m.map((function(e){return r.a.createElement(rt.b,{primary:e.name,key:e.id,contentAfter:r.a.createElement(Jt,{scene:e}),onPress:function(){return t(e)},className:Object(f.a)(Ft(),n===e.id?c.colors.intent.primary.dark:void 0)})}))))};function Qt(){var e=Object(o.a)(["\n              display: flex;\n              flex-direction: row;\n              width: 100%;\n              height: 100vh;\n            "]);return Qt=function(){return e},e}var $t=function(){var e=Object(s.b)(),t=Object(u.g)(),n=Object(u.i)(),a=function(){var e=Object(u.i)(),t=Object(u.i)({path:e.path+"/:id"});return null===t||void 0===t?void 0:t.params.id}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{title:"D&D Tabletop"}),r.a.createElement(d.a,{styles:{html:{background:e.colors.background.default,color:e.colors.text.default,fontFamily:e.fonts.base},body:{padding:0,margin:0,width:"100vw",height:"100vh","*:focus":{outline:"none"},overflow:"hidden"}}}),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:["".concat(n.path),"".concat(n.path,"/:id")],exact:!0},r.a.createElement("div",{className:Object(f.a)(Qt())},r.a.createElement(Kt,{onSceneSelect:function(e){t.push("".concat(n.path,"/").concat(e.id))},selectedSceneId:a}),r.a.createElement(zt,null)))))},en=tt().useOneValue,tn=Ue().useOneValue,nn=function(){var e=tn(Ae.DISPLAYED_SCENE),t=Object(b.a)(e,1)[0],n=tn(Ae.TABLE_FREEZE),c=Object(b.a)(n,1)[0],i=Be(),o=Object(b.a)(i,1)[0],l=en(t),u=Object(b.a)(l,1)[0],s=Object(a.useState)(),f=Object(b.a)(s,2),v=f[0],h=f[1],E=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),O=Object(b.a)(E,2),j=O[0],g=O[1];return Object(a.useEffect)((function(){!c&&u&&h(u)}),[u,c]),Object(a.useEffect)((function(){function e(){g({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),o?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{styles:{body:{background:"black",margin:0,padding:0,overflow:"hidden"}}}),r.a.createElement(m.a,{title:"D&D Table View"}),v&&r.a.createElement(T.Stage,Object.assign({},j,{offsetX:v.table.offset.x,offsetY:v.table.offset.y}),v.layers.map((function(e){var t=Je[e.type];return t&&!1!==e.visible?r.a.createElement(t,{key:e.id,layer:e,onUpdate:function(){},active:!1}):null})),r.a.createElement(xt,{layer:Object(p.a)(Object(p.a)({},wt),{},{options:v.table}),active:!1,onUpdate:function(){},showBorder:!1,showGrid:v.table.displayGrid}))):null},an=n(259),rn={home:{name:"Home",path:"/",sidebarIcon:function(){return r.a.createElement("img",{width:32,height:32,src:"favicon.png",alt:"home icon"})},main:function(){return r.a.createElement(u.a,{to:rn.scenes.path})},exact:!0},scenes:{name:"Scenes",path:"/scenes",sidebarIcon:Pt.a,main:function(){return r.a.createElement($t,null)},useOnClick:function(){var e=Se(),t=Object(b.a)(e,2),n=t[0],a=t[1];return function(){a(!n)}}},table:{name:"Table View",path:"/table",sidebarIcon:an.a,main:function(){return r.a.createElement(nn,null)},popout:!0,exact:!0}},cn=rn;function on(){var e=Object(o.a)(["flex-grow: 1;"]);return on=function(){return e},e}function ln(){var e=Object(o.a)(["\n\t\t\t\twidth: ","px;\n\t\t\t\theight: 100vh;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tbackground-color: ",";\n\t\t\t\tz-index: 300;\n\t\t\t"]);return ln=function(){return e},e}var un=function(e){var t=e.route,n=Object(s.b)(),a=!!Object(u.i)({path:t.path,exact:t.exact}),c=t.useOnClick?t.useOnClick():void 0,i=r.a.createElement(ce.a,{content:t.name,placement:"right"},r.a.createElement(h.b,{variant:"ghost",color:a?n.colors.text.default:n.colors.text.muted,size:"lg",icon:r.a.createElement(t.sidebarIcon,null),label:t.name}));return a?r.a.createElement("div",{onClick:c},i):r.a.createElement(l.b,{to:t.path,target:t.popout?"_blank":void 0},i)},sn=function(){var e=Le(),t=Object(u.h)();return Object.keys(cn).map((function(e){return cn[e]})).some((function(e){return e.exact&&e.popout&&e.path===t.pathname}))||t.pathname===cn.home.path?null:r.a.createElement("div",{className:Object(f.a)(ln(),e.sidebarWidth,e.colors.background.default)},Object.keys(cn).map((function(e){var t=cn[e];return r.a.createElement(un,{key:e,route:t})})),r.a.createElement("div",{className:Object(f.a)(on())}),r.a.createElement(Ve,null))};function fn(){var e=Object(o.a)(["\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t"]);return fn=function(){return e},e}var bn=function(){return r.a.createElement(s.a,null,r.a.createElement(l.a,null,r.a.createElement("div",{className:Object(f.a)(fn())},r.a.createElement(sn,null),r.a.createElement(u.d,null,Object.keys(cn).map((function(e){var t=cn[e];return r.a.createElement(u.b,{key:e,path:t.path,exact:t.exact,component:t.main})}))))))};i.a.render(r.a.createElement(bn,null),document.getElementById("root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.206b5a10.chunk.js.map